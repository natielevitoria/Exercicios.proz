<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jogo da Mem√≥ria</title>
    <!-- Manifest do PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #fce4ec);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            /* evita que grude nas bordas em telas menores */
            box-sizing: border-box;
        }


        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 30px;
            border-radius: 20px;
            background: white;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 100%;
            box-sizing: border-box;
            animation: fadeIn 0.8s ease-in-out;
        }


        .screen.active {
            display: flex;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #4a148c;
        }

        p {
            font-size: 1.1em;
            color: #555;
            margin-bottom: 25px;
        }

        select {
            padding: 10px;
            font-size: 1em;
            margin-bottom: 20px;
            border-radius: 10px;
            border: 1px solid #ccc;
        }

        .start-btn,
        .restart-btn {
            padding: 12px 25px;
            font-size: 1em;
            background-color: #7b1fa2;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 30px;
            
        }

        .start-btn:hover,
        .restart-btn:hover {
            background-color: #6a1b9a;
        }

        .stats {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #555;
        }

        .stats span {
            margin: 0 10px;
        }

        .card-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 15px;
            justify-content: center;
            width: 100%;
        }




        .card {
            aspect-ratio: 1 / 1;
            /* Mant√©m propor√ß√£o 1:1 */
            width: 100%;
            /* Ocupar√° a c√©lula da grid */
            perspective: 1000px;
            cursor: pointer;
        }


        .card-inner {
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
        }

        .card-front {
            background-color: #ce93d8;
            color: white;
        }

        .card-back {
            background-color: #4a148c;
            color: white;
            transform: rotateY(180deg);
        }

        .win-message {
            font-size: 1.2em;
            color: #2e7d32;
            margin-top: 15px;
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
</head>

<body>

    <!-- Tela de in√≠cio -->
    <div class="screen active" id="start-screen">
        <h1>üéÆ Bem-vindo ao Jogo da Mem√≥ria!</h1>
        <p>Escolha um tema para come√ßar:</p>
        <select id="theme-select">
            <option value="frutas">üçé Frutas</option>
            <option value="animais">üê∂ Animais</option>
            <option value="emojis">üòÑ Emojis</option>
        </select>
        <button class="start-btn" id="start-btn">Iniciar Jogo</button>
    </div>

    <!-- Tela do jogo -->
    <div class="screen" id="game-screen">
        <h1>Jogo da Mem√≥ria</h1>
        <div class="stats">
            <span>üïπÔ∏è Movimentos: <strong id="moves">0</strong></span>
            <span>‚è±Ô∏è Tempo: <strong id="timer">0s</strong></span>
        </div>
        <div class="card-board" id="card-board"></div>
        <button class="restart-btn" id="restart-btn">üîÑ Reiniciar Jogo</button>
        <div id="win-message" class="win-message"></div>
    </div>

    <script>
        const themes = {
            frutas: ['üçé', 'üçå', 'üçí', 'üçç', 'üçâ', 'üçá'],     // 6 frutas
            animais: ['üê∂', 'üê±', 'üê≠', 'üê∞', 'ü¶ä', 'üêª'],   // 6 animais
            emojis: ['üòÄ', 'üòé', 'ü•≥', 'üò°', 'üò≠', 'üòç']   // 6 emojis
        };


        let selectedTheme = 'frutas';
        let cardsArray = [...themes[selectedTheme], ...themes[selectedTheme]];

        let flippedCards = [];
        let matchedCards = [];
        let moves = 0;
        let timer = 0;
        let interval;
        let lockBoard = false;

        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const startBtn = document.getElementById('start-btn');
        const cardBoard = document.getElementById('card-board');
        const restartBtn = document.getElementById('restart-btn');
        const movesDisplay = document.getElementById('moves');
        const timerDisplay = document.getElementById('timer');
        const winMessage = document.getElementById('win-message');

        startBtn.addEventListener('click', () => {
            const themeSelect = document.getElementById('theme-select');
            selectedTheme = themeSelect.value;
            cardsArray = [...themes[selectedTheme], ...themes[selectedTheme]];
            startScreen.classList.remove('active');
            gameScreen.classList.add('active');
            restartGame();
        });

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createBoard() {
            const shuffledCards = shuffleArray([...cardsArray]);
            cardBoard.innerHTML = '';
            shuffledCards.forEach((card) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card');
                cardElement.dataset.value = card;

                cardElement.innerHTML = `
          <div class="card-inner">
            <div class="card-front">‚ùì</div>
            <div class="card-back">${card}</div>
          </div>
        `;

                cardElement.addEventListener('click', flipCard);
                cardBoard.appendChild(cardElement);
            });
        }

        function flipCard(event) {
            if (lockBoard) return;

            const clickedCard = event.currentTarget;
            if (clickedCard.classList.contains('flipped') || clickedCard.classList.contains('matched')) return;

            clickedCard.classList.add('flipped');
            flippedCards.push(clickedCard);

            if (flippedCards.length === 2) {
                lockBoard = true;
                moves++;
                movesDisplay.textContent = moves;
                setTimeout(checkMatch, 700);
            }
        }

        function checkMatch() {
            const [firstCard, secondCard] = flippedCards;
            const firstValue = firstCard.dataset.value;
            const secondValue = secondCard.dataset.value;

            if (firstValue === secondValue) {
                firstCard.classList.add('matched');
                secondCard.classList.add('matched');
                matchedCards.push(firstCard, secondCard);
            } else {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
            }

            flippedCards = [];
            lockBoard = false;

            if (matchedCards.length === cardsArray.length) {
                clearInterval(interval);
                winMessage.textContent = `üéâ Voc√™ venceu em ${moves} movimentos e ${timer} segundos!`;
            }
        }

        function restartGame() {
            matchedCards = [];
            flippedCards = [];
            moves = 0;
            timer = 0;
            lockBoard = false;
            movesDisplay.textContent = '0';
            timerDisplay.textContent = '0s';
            winMessage.textContent = '';
            clearInterval(interval);
            createBoard();
            interval = setInterval
            timerDisplay.textContent = '0s';
            winMessage.textContent = '';
            clearInterval(interval);
            createBoard();
            interval = setInterval(() => {
                timer++;
                timerDisplay.textContent = `${timer}s`;
            }, 1000);
        }

        restartBtn.addEventListener('click', restartGame);
    </script>

    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("service-worker.js")
                .then(() => console.log("Service Worker registrado"))
                .catch(err => console.log("Erro no SW:", err));
        }
    </script>
</body>

</html>
